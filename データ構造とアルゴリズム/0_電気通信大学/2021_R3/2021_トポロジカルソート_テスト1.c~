#include <stdio.h>
#include <stdlib.h>

#define MAX 100

int n = 5; // 頂点の数
/*
int adj[MAX][MAX] = {
    {0, 1, 0, 0, 1},
    {0, 0, 1, 0, 0},
    {0, 0, 0, 1, 0},
    {0, 0, 0, 0, 0},
    {0, 0, 0, 1, 0}
}; // 隣接行列
*/

// 設問の有向グラフの隣接行列
int adj[MAX][MAX] = {
    {0, 1, 0, 1, 0},
    {0, 0, 0, 0, 1},
    {0, 1, 0, 1, 1},
    {0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0}
}; // 隣接行列


int visited[MAX]; // 訪問済みの配列
int stack[MAX]; // トポロジカル順序のスタック
int top = -1; // スタックのトップインデックス

void dfs(int v) {
    visited[v] = 1;
    for (int i = 0; i < n; i++) {
        if (adj[v][i] == 1 && !visited[i]) {
            dfs(i);
        }
    }
    stack[++top] = v;
}

void topologicalSort() {
    for (int i = 0; i < n; i++) {
        visited[i] = 0;
    }

    for (int i = 0; i < n; i++) {
        if (!visited[i]) {
            dfs(i);
        }
    }

    printf("トポロジカル順序: ");
    while (top != -1) {
        printf("%d ", stack[top--]);
    }
    printf("\n");
}

int main() {
    topologicalSort();
    return 0;
}
